---
header:
  teaser            : # ì¸ë„¤ì¼ ì´ë¯¸ì§€ /assets/images/face_army.jpg
title       : A Tour of Go 2
excerpt     : Flow control statements # ì¸ë„¤ì¼ í•œì¤„ ìš”ì•½
categories  : Language Go
tags        : Go Basic
---
ì¶œì²˜ [Go Tour](https://go.dev/tour/flowcontrol/1)
---
ğŸš« ì•„ë˜ ë‚´ìš©ì€ ì£¼ê´€ì ì¸ ìƒê°ì´ë¯€ë¡œ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
---

## For 1

```go
package main

import "fmt"

func main() {
	sum := 0
	for i := 0; i < 10; i++ {
		sum += i
	}
	fmt.Println(sum)
}
// 45
```

GoëŠ” ë°˜ë³µë¬¸ì´ forë¬¸ ë‹¨ í•˜ë‚˜ë‹¤  
forë¬¸ì€ ì„¸ë¯¸ì½œë¡ (;)ì„ ê²½ê³„ë¡œ ì„¸ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤  
 - ì´ˆê¸°í™” ë¶€ë¶„ : ìˆœí™˜ ì´ì „ì— ë³€ìˆ˜ ë“±ì„ ì„ ì–¸í•˜ê±°ë‚˜ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„
 - ìˆœí™˜ ì¡°ê±´ ë¶€ë¶„ : ìˆœí™˜í•˜ê¸° ìœ„í•œ ì¡°ê±´ì„ íŒë³„í•˜ëŠ” ë¶€ë¶„, ê²°ê³¼ê°€ ê±°ì§“ì´ë©´ ìˆœí™˜ì„ ë©ˆì¶˜ë‹¤
 - ìˆœí™˜ í›„ ì²˜ë¦¬ ë¶€ë¶„ : ë§¤ ìˆœí™˜ì´ ëë‚  ë•Œ ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” ë¶€ë¶„

Goì˜ forë¬¸ì€ ë‹¤ë¥¸ ì–¸ì–´ë“¤ì´ë‘ ë‹¤ë¥´ê²Œ ê´„í˜¸()ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³   
ìˆœí™˜ ë‚´ìš©ë¶€ë¥¼ ê°ì‹¸ëŠ” ì¤‘ê´„í˜¸{}ê°€ í•„ìˆ˜ë‹¤  

---

## For 2

```go
package main

import "fmt"

func main() {
	sum := 1
	for ; sum < 1000; {
		sum += sum
	}
	fmt.Println(sum)
}
// 1024
```

forë¬¸ì—ì„œ ì´ˆê¸°í™” ë¶€ë¶„ê³¼ ìˆœí™˜ í›„ ì²˜ë¦¬ ë¶€ë¶„ì€ í•„ìˆ˜ê°€ ì•„ë‹ˆë‹¤

---

## For is Go's "while"

```go
package main

import "fmt"

func main() {
	sum := 1
	for sum < 1000 {
		sum += sum
	}
	fmt.Println(sum)
}
// 1024
```

Goì˜ forë¬¸ì—ì„œëŠ” ì„¸ë¯¸ì½œë¡ (;)ì„ ìƒëµí•  ìˆ˜ ìˆì–´ì„œ ë‹¤ë¥¸ ì–¸ì–´ë“¤ì˜ whileë¬¸ì²˜ëŸ¼ ì“¸ ìˆ˜ë„ ìˆë‹¤  

---

## Forever

```go
package main

func main() {
	for {
	}
}
// timeout running program
```

ìˆœí™˜ ì¡°ê±´ ë¶€ë¶„ì„ ìƒëµí•˜ë©´ ë¬´í•œ ë£¨í”„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤  

---

## If

```go
package main

import (
	"fmt"
	"math"
)

func sqrt(x float64) string {
	if x < 0 {
		return sqrt(-x) + "i"
	}
	return fmt.Sprint(math.Sqrt(x))
}

func main() {
	fmt.Println(sqrt(2), sqrt(-4))
}
// 1.4142135623730951 2i
```

Goì˜ ifë¬¸ì€ Goì˜ forë¬¸ê³¼ ë¹„ìŠ·í•˜ë‹¤  
ì¡°ê±´ ë¶€ë¶„ì´ ê´„í˜¸()ë¡œ ë‘˜ëŸ¬ìŒ“ì´ì§€ ì•Šê³ ,  
ë‚´ìš© ë¶€ë¶„ì— ì¤‘ê´„í˜¸{}ê°€ í•„ìˆ˜ë‹¤  

---

## If with a short statement

```go
package main

import (
	"fmt"
	"math"
)

func pow(x, n, lim float64) float64 {
	if v := math.Pow(x, n); v < lim {
		return v
	}
	return lim
}

func main() {
	fmt.Println(
		pow(3, 2, 10),
		pow(3, 3, 20),
	)
}
// 9 20
```

forë¬¸ì²˜ëŸ¼ ifë¬¸ì—ë„ ì¡°ê±´ ë¶€ë¶„ ì „ì— ì´ˆê¸°í™” ë¶€ë¶„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤  
ê·¸ëŸ¬ë‚˜ ì´ˆê¸°í™” ë¶€ë¶„ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì˜ ìŠ¤ì½”í”„ëŠ” ifë¬¸ ì•ˆìœ¼ë¡œ ì œí•œëœë‹¤  
(ifë¬¸ ë°–ì—ì„œ ì°¸ì¡°í•˜ë©´ ì—ëŸ¬ë°œìƒ!)  

---

## If and else

```go
package main

import (
	"fmt"
	"math"
)

func pow(x, n, lim float64) float64 {
	if v := math.Pow(x, n); v < lim {
		return v
	} else {
		fmt.Printf("%g >= %g\n", v, lim)
	}
	// can't use v here, though
	return lim
}

func main() {
	fmt.Println(
		pow(3, 2, 10),
		pow(3, 3, 20),
	)
}
// 27 >= 20
// 9 20
```

ifë¬¸ì˜ ì´ˆê¸°í™” ë¶€ë¶„ì—ì„œ ì„ ì–¸ëœ ë³€ìˆ˜ë“¤ì€ else êµ¬ë¬¸ ì•ˆì—ì„œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤  

---

## Exercise: Loops and Functions

```go
package main

import (
	"fmt"
)

func Sqrt(x float64) float64 {
	var z = x
	for z != z - (z*z - x) / (2*z) {
		z -= (z*z - x) / (2*z)
		fmt.Println(z)
	}
	return z
}

func main() {
	fmt.Println(Sqrt(7))
}
// 4
// 2.875
// 2.654891304347826
// 2.6457670441902894
// 2.6457513111113693
// 2.6457513110645907
// 2.6457513110645907
```

ì œê³±ê·¼ í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ì„œ í•¨ìˆ˜ì™€ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ë³´ì  
ì œê³±ê·¼ í•¨ìˆ˜ëŠ” xë¼ëŠ” ìˆ«ìê°€ ì£¼ì–´ì¡Œì„ ë•Œ,  
$z^2 = x$ë¥¼ ì¶©ì¡±í•˜ëŠ” zë¥¼ ì°¾ì•„ì£¼ëŠ” í•¨ìˆ˜ë‹¤

```go
z -= (z*z - x) / (2*z)
```
ìœ„ì˜ ì¡°ì •ê°’ì„ ë°˜ì˜í•  ë•Œë§ˆë‹¤ zì˜ ê°’ì€ $\sqrt{x}$ì— ê°€ê¹Œì›Œì§„ë‹¤   

---

## Switch

```go
package main

import (
	"fmt"
	"runtime"
)

func main() {
	fmt.Print("Go runs on ")
	switch os := runtime.GOOS; os {
	case "darwin":
		fmt.Println("OS X.")
	case "linux":
		fmt.Println("Linux.")
	default:
		// freebsd, openbsd,
		// plan9, windows...
		fmt.Printf("%s.\n", os)
	}
}
```

switchë¬¸ì€ ë°˜ë³µë˜ëŠ” if - elseêµ¬ë¬¸ì˜ ë” ì§§ì€ ë°©ë²•ì´ë‹¤  
ì¡°ê±´ ë¶€ë¶„ê³¼ ì¼ì¹˜í•˜ëŠ” ì²«ë²ˆì§¸ caseë¥¼ ì‹¤í–‰í•œë‹¤  

Goì˜ switchë¬¸ì€ caseë§ˆë‹¤ breakë¬¸ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì ìš©ëœë‹¤  
ê²Œë‹¤ê°€ caseê°’ì€ ìƒìˆ˜ë‚˜ ì •ìˆ˜ì¼ í•„ìš”ë„ ì—†ë‹¤  

---

## Switch evaluation order

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	fmt.Println("When's Saturday?")
	today := time.Now().Weekday()
	switch time.Saturday {
	case today + 0:
		fmt.Println("Today.")
	case today + 1:
		fmt.Println("Tomorrow.")
	case today + 2:
		fmt.Println("In two days.")
	default:
		fmt.Println("Too far away.")
	}
}
```

switchë¬¸ì€ ìœ„ì—ì„œ ì•„ë˜ë¡œì˜ ìˆœì„œë¡œ caseë¥¼ í™•ì¸í•œë‹¤  

---

## Switch with no condition

```go
package main

import (
	"fmt"
	"time"
)

func main() {
	t := time.Now()
	switch {
	case t.Hour() < 12:
		fmt.Println("Good morning!")
	case t.Hour() < 17:
		fmt.Println("Good afternoon.")
	default:
		fmt.Println("Good evening.")
	}
}
```

switch ë¬¸ì— ì¡°ê±´ ë¶€ë¶„ì„ ìƒëµí•˜ë©´ caseê°’ì´ ì°¸ì¸ ê²½ìš°ë¥¼ í™•ì¸í•œë‹¤  
(ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•œë‹¤)
```go
switch true
```

---

## Defer

```go
package main

import "fmt"

func main() {
	defer fmt.Println("world")

	fmt.Println("hello")
}
// hello
// world
```

Deferë¬¸ì€ ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ì´ ëª¨ë‘ ì¢…ë£Œë  ë•Œê¹Œì§€ ì‹¤í–‰ì„ ì—°ê¸°ì‹œí‚¤ëŠ” êµ¬ë¬¸ì´ë‹¤  

---

## Stacking defers

```go
package main

import "fmt"

func main() {
	defer fmt.Println("counting")

	for i := 0; i < 5; i++ {
		defer fmt.Println(i)
	}

	fmt.Println("done")
}
// done
// 4
// 3
// 2
// 1
// 0
// counting
```

deferë¬¸ì€ ìŠ¤íƒ êµ¬ì¡°(í›„ì…ì„ ì¶œ, FILO)ë¡œ ìŒ“ì´ê³  ìˆ˜í–‰ëœë‹¤  
