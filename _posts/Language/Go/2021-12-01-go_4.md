---
header:
  teaser            : # ì¸ë„¤ì¼ ì´ë¯¸ì§€ /assets/images/face_army.jpg
title       : A Tour of Go 4
excerpt     : "More types: #2" # ì¸ë„¤ì¼ í•œì¤„ ìš”ì•½
categories  : Language Go
tags        : Go Basic
---
ì¶œì²˜ [Go Tour](https://go.dev/tour/moretypes/16)
---
ğŸš« ì•„ë˜ ë‚´ìš©ì€ ì£¼ê´€ì ì¸ ìƒê°ì´ë¯€ë¡œ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---
---

## Range 1

```go
package main

import "fmt"

var pow = []int{1, 2, 4, 8, 16, 32, 64, 128}

func main() {
	for i, v := range pow {
		fmt.Printf("2**%d = %d\n", i, v)
	}
}
// 2**0 = 1
// 2**1 = 2
// 2**2 = 4
// 2**3 = 8
// 2**4 = 16
// 2**5 = 32
// 2**6 = 64
// 2**7 = 128
```

for ë°˜ë³µë¬¸ì—ì„œì˜ rangeëŠ” ìŠ¬ë¼ì´ìŠ¤ ë˜ëŠ” ë§µì„ ìˆœíšŒí•œë‹¤  

ìŠ¬ë¼ì´ìŠ¤ë¥¼ ëŒ€ìƒìœ¼ë¡œ rangeë¥¼ ì‚¬ìš©í•  ë•Œ, ë§¤ ìˆœíšŒë§ˆë‹¤ ë‘ ê°’ì´ ë°˜í™˜ë˜ëŠ”ë°,  
ì²«ë²ˆì§¸ ê°’ì€ ì¸ë±ìŠ¤ì´ê³ , ë‘ ë²ˆì§¸ ê°’ì€ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ìš”ì†Œì˜ ë³µì‚¬ë³¸ì´ë‹¤  

---

## Range 2

```go
package main

import "fmt"

func main() {
	pow := make([]int, 10)
	for i := range pow {
		pow[i] = 1 << uint(i) // == 2**i
	}
	for _, value := range pow {
		fmt.Printf("%d\n", value)
	}
}
// 1
// 2
// 4
// 8
// 16
// 32
// 64
// 128
// 256
// 512
```

_ë¥¼ í• ë‹¹í•´ì„œ ì¸ë±ìŠ¤ ë˜ëŠ” ê°’ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤  

```go
for i, _ := range pow
for _, value := range pow
```

ì¸ë±ìŠ¤ë§Œ ì‚¬ìš©í• ê±°ë¼ë©´ ë‘ ë²ˆì§¸ ë³€ìˆ˜ë¥¼ ìƒëµí•´ë„ ëœë‹¤  

```go
for i := range pow
```

---

## Exercise: Slices

```go
package main

import "golang.org/x/tour/pic"

func Pic(dx, dy int) [][]uint8 {
	result := make([][]uint8, dy)
	for i := 0; i < dy; i++ {
		result[i] = make([]uint8, dx)
	}
	
	for y := 0; y < dy; y++ {
		for x := 0; x < dx; x++ {
			switch (x * y) % 3 {
				case 0:
					result[y][x] = uint8((x + y) / 2)
				case 1:
					result[y][x] = uint8(x * y)
				case 2:
					result[y][x] = uint8(x ^ y)
			}
		}
	}
	
	return result
}
```

Pic í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì  
ê°€ë¡œ ì„¸ë¡œ ê°ê° ì…ë ¥ë°›ì€ dx, dyê¸¸ì´ì˜  
uint8 íƒ€ì… 2ì°¨ì› ë°°ì—´ì„ ë°˜í™˜í•˜ë©´ ëœë‹¤  

ê° ìš”ì†Œì˜ ê°’ë“¤ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•´ ì¶œë ¥ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤  
(x+y)/2, x*y, x^y ë“±ì˜ ìˆ˜ì‹ì„ ì‚¬ìš©í•˜ëŠ”ê²ƒë„ ì¢‹ë‹¤  

- ë°˜ë³µë¬¸ì„ í†µí•´ 2ì°¨ì› ë°°ì—´([][]uint8)ì˜ ìš”ì†Œë“¤ì— ê°ê°ì˜ ë°°ì—´([]uint8)ë“¤ì„ í• ë‹¹í•´ì¤˜ì•¼ í•œë‹¤  
- uint8(ì •ìˆ˜ê°’)ì„ ì‚¬ìš©í•´ í˜•ë³€í™˜í•œë‹¤  

---

## Maps

```go
package main

import "fmt"

type Vertex struct {
	Lat, Long float64
}

var m map[string]Vertex

func main() {
	m = make(map[string]Vertex)
	m["Bell Labs"] = Vertex{
		40.68433, -74.39967,
	}
	fmt.Println(m["Bell Labs"])
}
// {40.68433 -74.39967}
```

ë§µì€ í‚¤ì— ê°’ì„ ë§¤í•‘í•œë‹¤  
ë§µì˜ ê¸°ë³¸ê°’ì€ nilì´ê³ , nil ë§µì€ í‚¤ë„ ì—†ê³  í‚¤ë¥¼ ì¶”ê°€í•  ìˆ˜ë„ ì—†ë‹¤  

make í•¨ìˆ˜ëŠ” ì…ë ¥ëœ íƒ€ì…ì˜ ë§µ(ì´ˆê¸°í™”ë˜ê³  ë°”ë¡œ ì‚¬ìš©ê°€ëŠ¥í•œ)ì„ ë°˜í™˜í•œë‹¤

---

## Map literals 1

```go
package main

import "fmt"

type Vertex struct {
	Lat, Long float64
}

var m = map[string]Vertex{
	"Bell Labs": Vertex{
		40.68433, -74.39967,
	},
	"Google": Vertex{
		37.42202, -122.08408,
	},
}

func main() {
	fmt.Println(m)
}
// map[Bell Labs:{40.68433 -74.39967} Google:{37.42202 -122.08408}]
```

ë§µ ë¦¬í„°ëŸ´ì€ ê¸°ë³¸ì ìœ¼ë¡œ êµ¬ì¡°ì²´ ë¦¬í„°ëŸ´ê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ í‚¤ê°€ í•„ìš”í•˜ë‹¤ 

---

## Map literals 2

```go
package main

import "fmt"

type Vertex struct {
	Lat, Long float64
}

var m = map[string]Vertex{
	"Bell Labs": {40.68433, -74.39967},
	"Google":    {37.42202, -122.08408},
}

func main() {
	fmt.Println(m)
}
// map[Bell Labs:{40.68433 -74.39967} Google:{37.42202 -122.08408}]
```

ë¦¬í„°ëŸ´ ìš”ì†Œì˜ íƒ€ì…ì´ ìµœìƒìœ„ì˜ íƒ€ì…ê³¼ ë™ì¼í•˜ë‹¤ë©´, íƒ€ì…ì„ ìƒëµí•´ë„ ëœë‹¤  

---

## Mutating Maps

```go
package main

import "fmt"

func main() {
	m := make(map[string]int)

	m["Answer"] = 42
	fmt.Println("The value:", m["Answer"])

	m["Answer"] = 48
	fmt.Println("The value:", m["Answer"])

	delete(m, "Answer")
	fmt.Println("The value:", m["Answer"])

	v, ok := m["Answer"]
	fmt.Println("The value:", v, "Present?", ok)
}
// The value: 42
// The value: 48
// The value: 0
// The value: 0 Present? false
```

ë§µ mì˜ ìš”ì†Œë¥¼ ì—…ë°ì´íŠ¸ ë˜ëŠ” ì‚½ì…  

```go
m[key] = elem
```

ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°  

```go
elem = m[key]
```

ìš”ì†Œ ì‚­ì œ  

```go
delete(m, key)
```

ë‘ ê°œì˜ ê°’ì„ í• ë‹¹í•´ ë§µì— í‚¤ê°€ ìˆëŠ”ì§€ í™•ì¸  

```go
elem, ok = m[key]
```
ë§µ mì— í‚¤ê°€ ìˆìœ¼ë©´ okê°’ì€ true, ì—†ìœ¼ë©´ falseë‹¤  
ë§µì— í‚¤ê°€ ì—†ìœ¼ë©´ elemì˜ ê°’ì€ ìš”ì†Œ íƒ€ì…ì˜ ê¸°ë³¸ê°’ì´ ëœë‹¤  

elem, ok ëª¨ë‘ ì´ˆê¸°í™”ëœ ì ì´ ì—†ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ í• ë‹¹ì´ ê°€ëŠ¥í•˜ë‹¤  

```go
elem, ok := m[key]
```

---

## Exercise: Maps

```go
package main

import (
	"golang.org/x/tour/wc"
	"strings"
)

func WordCount(s string) map[string]int {
	result := make(map[string]int)
	for _, v := range strings.Fields(s) {
		result[v] = result[v] + 1
	}
	return result
}

func main() {
	wc.Test(WordCount)
}
// PASS
//  f("I am learning Go!") = 
//   map[string]int{"Go!":1, "I":1, "am":1, "learning":1}
// PASS
//  f("The quick brown fox jumped over the lazy dog.") = 
//   map[string]int{"The":1, "brown":1, "dog.":1, "fox":1, "jumped":1, "lazy":1, "over":1, "quick":1, "the":1}
// PASS
//  f("I ate a donut. Then I ate another donut.") = 
//   map[string]int{"I":2, "Then":1, "a":1, "another":1, "ate":2, "donut.":2}
// PASS
//  f("A man a plan a canal panama.") = 
//   map[string]int{"A":1, "a":2, "canal":1, "man":1, "panama.":1, "plan":1}
```

WordCount í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì  
- ì…ë ¥ê°’ s stringì„ ê³µë°± ë¬¸ì ê¸°ì¤€ìœ¼ë¡œ ë¶„í• í•´
- ë‹¨ì–´ë³„ ì¶œí˜„ íšŸìˆ˜ë¥¼ ë§µì— ë‹´ì•„ ë°˜í™˜í•˜ë©´ ëœë‹¤

[strings.Fields ë¬¸ì„œ](https://pkg.go.dev/strings#Fields)ê°€ ë„ì›€ì´ ë  ê²ƒì´ë‹¤  

---

## Function values

```go
package main

import (
	"fmt"
	"math"
)

func compute(fn func(float64, float64) float64) float64 {
	return fn(3, 4)
}

func main() {
	hypot := func(x, y float64) float64 {
		return math.Sqrt(x*x + y*y)
	}
	fmt.Println(hypot(5, 12))

	fmt.Println(compute(hypot))
	fmt.Println(compute(math.Pow))
}
// 13
// 5
// 81
```

í•¨ìˆ˜ë„ ê°’ì´ë‹¤  
í•¨ìˆ˜ë„ ë‹¤ë¥¸ ë³€ìˆ˜ë“¤ì²˜ëŸ¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤  

í•¨ìˆ˜ê°’ì€ íŒŒë¼ë¯¸í„°ë‚˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤

---

## Function closures

```go
package main

import "fmt"

func adder() func(int) int {
	sum := 0
	return func(x int) int {
		sum += x
		return sum
	}
}

func main() {
	pos, neg := adder(), adder()
	for i := 0; i < 10; i++ {
		fmt.Println(
			pos(i),
			neg(-2*i),
		)
	}
}
// 0 0
// 1 -2
// 3 -6
// 6 -12
// 10 -20
// 15 -30
// 21 -42
// 28 -56
// 36 -72
// 45 -90
```

> í´ë¡œì €(closure)ëŠ” ë‚´ë¶€í•¨ìˆ˜ì™€ ë°€ì ‘í•œ ê´€ê³„ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì£¼ì œë‹¤.  
> ë‚´ë¶€í•¨ìˆ˜ëŠ” ì™¸ë¶€í•¨ìˆ˜ì˜ ì§€ì—­ë³€ìˆ˜ì— ì ‘ê·¼ í•  ìˆ˜ ìˆëŠ”ë°  
> ì™¸ë¶€í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ëë‚˜ì„œ ì™¸ë¶€í•¨ìˆ˜ê°€ ì†Œë©¸ëœ ì´í›„ì—ë„  
> ë‚´ë¶€í•¨ìˆ˜ê°€ ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— ì ‘ê·¼ í•  ìˆ˜ ìˆë‹¤.  
> ì´ëŸ¬í•œ ë©”ì»¤ë‹ˆì¦˜ì„ í´ë¡œì €ë¼ê³  í•œë‹¤.  
>  - ì¶œì²˜ : [ìƒí™œì½”ë”© JavaScript - í´ë¡œì €](https://opentutorials.org/course/743/6544)


Goì—ì„œë„ í´ë¡œì €ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤  
í´ë¡œì €ì—ì„œ ë‚´ë¶€í•¨ìˆ˜ëŠ” ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— "bound(ë°”ìš´ë“œ)" ëœë‹¤  
ì˜ˆë¥¼ ë“¤ë©´, ìœ„ ì½”ë“œì˜ adder í•¨ìˆ˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•˜ê³ ,  
ê° í´ë¡œì €ëŠ” ê·¸ ìì²´ì˜ sum ë³€ìˆ˜ì— bound(ë°”ìš´ë“œ) ëœë‹¤  

---

## Exercise: Fibonacci closure

```go
package main

import "fmt"

// fibonacci is a function that returns
// a function that returns an int.
func fibonacci() func() int {
	prev := 0
	next := 1
	return func() int {
		temp := prev
		prev = next
		next = temp + prev
		return temp
	}
}

func main() {
	f := fibonacci()
	for i := 0; i < 10; i++ {
		fmt.Println(f())
	}
}
// 0
// 1
// 1
// 2
// 3
// 5
// 8
// 13
// 21
// 34
```

í´ë¡œì €ë¡œ [í”¼ë³´ë‚˜ì¹˜ ìˆ˜](https://en.wikipedia.org/wiki/Fibonacci_number)ë¥¼ êµ¬í˜„í•´ë³´ì

---

