---
header:
  teaser            : # ì¸ë„¤ì¼ ì´ë¯¸ì§€ /assets/images/face_army.jpg
title               : FastAPI 1 # ì œëª©
excerpt             : Python Framework # ì¸ë„¤ì¼ í•œì¤„ ìš”ì•½
last_modified_at    : 2021-03-24 # ë§ˆì§€ë§‰ ìˆ˜ì •ì¼
categories          : Framework FastAPI
tags                : FastAPI Python Framework Command CLI
toc                 : # ëª©ì°¨ ì‚¬ìš©ì—¬ë¶€
toc_label           : # ëª©ì°¨ ì œëª©
# {: .notice--info}
---

---
## ì¶œì²˜ : [FastAPI](https://fastapi.tiangolo.com/)

ğŸš« ì•„ë˜ ë‚´ìš©ì€ ì£¼ê´€ì ì¸ ìƒê°ì´ë¯€ë¡œ ì‚¬ì‹¤ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‹œì‘ ì „ ê°„ëµ ê²‰í•¥ê¸°

## íŠ¹ì§•
 - ì‰¬ì›€
 - ë¹ ë¦„
 - ì½”ë“œ ì‘ì„±ë„ ë¹ ë¦„
 - ì‘ì„±í•  ì½”ë“œë„ ì§§ìŒ
 - ë²„ê·¸ ì ìŒ
 - ì§ê´€ì , ì™„ì„±í˜•
 - ìë™ìœ¼ë¡œ ë°˜ì‘í˜• API ë¬¸ì„œ ìƒì„±
 - OpenAPI(Swagger), JSON ìŠ¤í‚¤ë§ˆ ì™„ë²½ í˜¸í™˜
 - ì›¹ ë¶€ë¶„ : Starlette ë¹„ë™ê¸° í”„ë ˆì„ì›Œí¬ ê¸°ë°˜
 - ë°ì´í„° ë¶€ë¶„ : Pydanticì˜ BaseModel ê¸°ë°˜ ë¬¸ì„œ ìë™í™”

### ì„¤ì¹˜

```
$ pip install fastapi
$ pip install uvicorn
```

### ì˜ˆì œ

main.py
```py
from typing import Optional

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}

# async ì¶”ê°€ì‹œ ë¹„ë™ê¸°
# @app.get("/")
# async def read_root():
#     return {"Hello": "World"}

@app.get("/items/{item_id}")
def read_item(item_id: int, q: Optional[str] = None):
    return {"item_id": item_id, "q": q}
```


### ì‹¤í–‰

```
$ uvicorn main:app --reload
// reload : ë³€ê²½ì‚¬í•­ ìë™ ë¦¬ë¡œë“œ ì˜µì…˜
// ì¶”ê°€ ì˜µì…˜ ê°€ëŠ¥
```

### ì‘ë‹µ í™•ì¸

```py
...
@app.get("/items/{item_id}")
def read_item(item_id: int, q: Optional[str] = None):
    return {"item_id": item_id, "q": q}
...
```

```
http://127.0.0.1:8000/items/5?q=somequery
```
ìœ„ ìš”ì²­ì˜ ì‘ë‹µì€ ì•„ë˜ì™€ ê°™ë‹¤
```
{"item_id": 5, "q": "somequery"}
```

### ë°˜ì‘í˜• API ë¬¸ì„œ

ì•„ë˜ë¡œ ì§„ì…ì‹œ Swagger UIì˜ ë°˜ì‘í˜• APIë¬¸ì„œê°€ ìë™ìœ¼ë¡œ ìƒì„±ëìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤
```
http://127.0.0.1:8000/docs
// redocì€ ReDoc UI
```


## Pydantic BaseModel í™œìš©

```py
# from typing import Optional
# from fastapi import FastAPI

from pydantic import BaseModel

# app = FastAPI()

class Item(BaseModel):
    name: str
    price: float
    is_offer: Optional[bool] = None

# @app.get("/")
# def read_root():
#     return {"Hello": "World"}

# @app.get("/items/{item_id}")
# def read_item(item_id: int, q: Optional[str] = None):
#     return {"item_id": item_id, "q": q}

@app.put("/items/{item_id}")
def update_item(item_id: int, item: Item):
    return {"item_name": item.name, "item_id": item_id}
```

---
---

- ê¸°ë³¸ì ì¸ Python 3.6+ì— ë”°ë¥¸ í‘œì¤€íƒ€ì…(ì„ ì–¸í•œ class íƒ€ì… í¬í•¨) ì§€ì›
  - ìë™ì™„ì„±
  - íƒ€ì… í™•ì¸ ì§€ì›
- ì…ë ¥ê°’ ë³€í™˜ ì§€ì›
  - JSON
  - Path parameters
  - Query parameters
  - Cookies
  - Headers
  - Forms
  - Files

- ì¶œë ¥ê°’ ë³€í™˜ ì§€ì›
  - ê¸°ë³¸í˜• íƒ€ì…
  - datetime ê°ì²´
  - UUID ê°ì²´
  - Database models
  - ë“±ë“±..